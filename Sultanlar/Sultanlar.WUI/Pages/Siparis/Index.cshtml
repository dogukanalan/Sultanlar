@page
@model IndexModel
@{
    ViewData["Title"] = "Fiyat Seçimi";
}

@section head {
    <link rel="stylesheet" href="https://cdn.datatables.net/v/bs/dt-1.10.18/r-2.2.2/datatables.min.css" />

    <script src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/v/bs/dt-1.10.18/r-2.2.2/datatables.min.js"></script>

    <style>
        table {
            width: 0px !important;
            min-width: 270px;
            margin: 0 auto;
        }
    </style>

    <script type="text/javascript">
        function UyeYetkileri(uyeid) {
            $.ajax(
                {
                    xhr: function () { return xhrDownloadUpload(); },
                    beforeSend: function (xhr) { xhrTicket(xhr); },
                    url: apiurl + "uyeyetki/" + uyeid,
                    success: function (data, textStatus, response) {
                        checkAuth(response);

                        var rootData = Object.keys(data.fiyatTipleri).length == 0 ? data.grupFiyatTipleri : data.fiyatTipleri;

                        var htmlText = '<table id="dtTable" class="table table-striped table-bordered"><thead><tr><th class="keyTd">Fiyat Tipi Belirleyiniz</th></tr></thead><tbody>';
                        $.each(rootData, function (i, item) {
                            htmlText += '<tr class="onclickcursor" onclick="window.location.href = \'Siparis?smref=' + getParameterByName("smref") + '&ftip=' + rootData[i].sintFiyatTipiID + '\'">';
                            htmlText += '<td class="valueTd">' + rootData[i].fiyatTipi.aciklama + '</td>';
                            htmlText += '</tr>';
                        });
                        divData.innerHTML = htmlText + '</table>';
                        initDt(0, false, false, false, false);
                    },
                    error: function (XMLHttpRequest, textStatus, errorThrown) { console.log('hata'); }
                }
            );
        }

        $(document).ready(function () {
            UyeYetkileri(localStorage["musteri"]);
        });
    </script>
}
<div id="divData"></div>
